<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Jersey Energy Savings - Step 4</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="nav">
        <a href="{{ url_for('survey_step1') }}" class="nav-link active">Survey</a>
        <a href="{{ url_for('submissions') }}" class="nav-link">Submissions</a>
        <a href="{{ url_for('restart') }}" class="nav-link">Restart Survey</a>
    </nav>

    <!-- Header -->
    <header class="header text-center">
        <img src="{{ url_for('static', filename='images/solar.jpg') }}" alt="Solar Icon" class="header-icon">
        <center><h1>NEW JERSEY ENERGY SAVINGS</h1></center>
        <B><center><p>SEE IF YOUR HOME QUALIFIES.<br>LIMITED TO 10 HOMES PER ZIP CODE.</p></center></B>
    </header>

    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-step completed">1</div>
        <div class="progress-step completed">2</div>
        <div class="progress-step completed">3</div>
        <div class="progress-step active">4</div>
    </div>
    <div class="progress-text">Step 4 of 4: Personal Information</div>

    <!-- Form -->
    <div class="container">
        <div class="card">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">Ã—</span>
                            </button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            <form method="POST" action="{{ url_for('survey_step4') }}">
                {{ form.hidden_tag() }}
                <div class="form-group">
                    <label>{{ form.first_name.label }}</label>
                    {{ form.first_name(class="form-control") }}
                    {% if form.first_name.errors %}
                        <span class="error">{{ form.first_name.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>{{ form.last_name.label }}</label>
                    {{ form.last_name(class="form-control") }}
                    {% if form.last_name.errors %}
                        <span class="error">{{ form.last_name.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>{{ form.email.label }}</label>
                    {{ form.email(class="form-control") }}
                    {% if form.email.errors %}
                        <span class="error">{{ form.email.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>{{ form.phone.label }}</label>
                    {{ form.phone(class="form-control") }}
                    {% if form.phone.errors %}
                        <span class="error">{{ form.phone.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>{{ form.address.label }}</label>
                    {{ form.address(class="form-control") }}
                    {% if form.address.errors %}
                        <span class="error">{{ form.address.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>{{ form.city.label }}</label>
                    {{ form.city(class="form-control") }}
                    {% if form.city.errors %}
                        <span class="error">{{ form.city.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>{{ form.zip_code.label }}</label>
                    {{ form.zip_code(class="form-control") }}
                    {% if form.zip_code.errors %}
                        <span class="error">{{ form.zip_code.errors[0] }}</span>
                    {% endif %}
                </div>
                <div class="button-group">
                    <a href="{{ url_for('survey_step3') }}" class="btn btn-back">Back</a>
                    {{ form.submit(class="btn btn-next") }}
                </div>
            </form>
        </div>
    </div>

    <!-- TrustedSite Badge -->
    <div class="trustedsite-badge text-center">
        <img src="{{ url_for('static', filename='images/trusted_site.png') }}" alt="TrustedSite Certified Secure">
        <B><center><p>CERTIFIED SECURE</p></center></B>
    </div>


    <!-- Bootstrap JS for alerts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>